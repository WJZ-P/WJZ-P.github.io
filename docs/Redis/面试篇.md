# Redis常见面试题

开始学习Redis辣！！！

先来张图吧

![image](https://cdn.xiaolincoding.com/gh/xiaolincoder/redis/%E5%85%AB%E8%82%A1%E6%96%87/redis%E5%85%AB%E8%82%A1%E6%96%87%E6%8F%90%E7%BA%B2.png)

## 首先，什么是Redis?

Redis是一个开源的内存数据结构存储。用作数据库、缓存、消息代理和流引擎。redis可以通过定期把数据转储到磁盘或者将每个命令附加基于磁盘的日志来持久化数据。

Redis还包括交易、发布/订阅、Lua脚本、生命周期有限的密钥、LRU驱逐密钥、自动故障转移等

Redis是基于内存的数据库，读写速度非常快，常用于缓存、消息队列、分布式锁等场景。

Redis的数据类型有String、Hash、List、Set、Zset、Bitmaps、HyperLogLog、GEO、Stream、并且对数据类型的操作都是原子性的，因为是单线程执行命令，没有并发竞争的问题。

### Redis和Memcached有什么区别？

共同点：
1. 都是基于内存
2. 都有过期策略
3. 性能都很高

区别：
- redis支持的数据类型更丰富，Memcached只支持最简单的key-value类型。
- redis支持数据的持久化，但是memcached没有。
- redis原生支持集群，memcached没有
- redis支持发布订阅模型、Lua脚本、事务等功能，而Memcached不支持。

### 为什么用Redis作为MySQL的缓存？

主要是因为redis具备高性能和高并发两种特性。

高性能很好理解，因为Redis是基于内存的，读写速度很快。

高并发：单台设备Redis的QPS是MySQL十倍。能轻松破10w，MySQL的单体很难破1w。

### Redis数据结构

Redis数据类型和使用场景分别是什么？

常见的是五种数据类型：String字符串，Hash哈希表，List列表，Set集合，Zset有序集合。

![image](https://cdn.xiaolincoding.com/gh/xiaolincoder/redis/%E5%85%AB%E8%82%A1%E6%96%87/key.png)

随着Redis版本的更新，后面又支持了四种数据类型：BitMap、HyperLogLog、GEO、Stream。

不同数据类型的应用场景：
- String：缓存对象、常规计数、分布式锁、共享session信息等。
- List：消息队列
- Hash：缓存对象、购物车等。
- Set：聚合计算（并集、交集、差集），比如点赞、共同关注、抽奖活动等。
- Zset：排序，比如排行榜等。

后续新加的数据类型：
- BitMap：二值状态统计的场景，比如签到、判断用户登陆状态、连续签到用户总数等。
- HyperLogLog：海量数据基数统计的场景，比如百万级网页UV计数等。(UV:unique visitor)
- GEO：存储地理位置信息的场景
- Stream：消息队列，相比于基于List实现的消息队列，特性为自动生成全局唯一消息ID，支持以消费组形式消费数据。

![image](https://cdn.xiaolincoding.com//mysql/other/9fa26a74965efbf0f56b707a03bb9b7f.png)

